#include <bits/stdc++.h>
using namespace std;
int main() {
    int n;
    cout << "Nhap so an n: ";
    cin >> n;
    vector<vector<double>> a(n, vector<double>(n+1));
    cout <<"Nhap ma tran mo rong [A|B] (" <<n<<" hang, "<<n+1<<" cot):\n";
    for (int i=0;i<n;i++)
        for (int j=0;j<=n;j++) cin >> a[i][j];
//buoc 1.1
    for (int i=0;i<n;i++)
    {
        int M=i;
        for (int k=i+1; k<n; k++)
            if (fabs(a[k][i]) > fabs(a[M][i])) M= k;
//buoc 1.2
        swap(a[i],a[M]);
    double d=a[i][i];
    if (fabs(d)<1e-12) {
    bool kt=true;
    for (int j=i; j<n; j++)
        if (fabs(a[i][j])>1e-12) {
            kt= false;
            break;
        }
    if (kt) {
        if (fabs(a[i][n]) > 1e-12)
            cout << "He phuong trinh vo nghiem.\n";
        else
            cout << "He phuong trinh vo so nghiem.\n";
    }
    else
        cout << "He phuong trinh vo nghiem.\n";
    return 0;
}

//buoc 1.3
        for (int j=0;j<=n;j++) a[i][j]/= d;
//buoc 1.4
        for (int k=0; k<n; k++) {
            if (k==i) continue;
            double factor = a[k][i];
            for (int j=0; j<=n; j++) a[k][j]-= factor * a[i][j];
        }
    }
    cout << "Nghiem cua he la:\n";
    for (int i = 0; i < n; i++)
        cout << "x" << i+1 <<" = "<<a[i][n]<< "\n";
    return 0;
}

